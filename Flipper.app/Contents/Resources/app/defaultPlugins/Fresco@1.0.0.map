{"version":3,"sources":["__prelude__","/data/sandcastle/boxes/trunk-hg-fbcode-fbsource/xplat/flipper-public/static/node_modules/metro/src/lib/polyfills/require.js","/data/sandcastle/boxes/trunk-hg-fbcode-fbsource/xplat/flipper-public/src/plugins/fresco/index.js","/data/sandcastle/boxes/trunk-hg-fbcode-fbsource/xplat/flipper-public/src/plugins/fresco/ImagesCacheOverview.js","/data/sandcastle/boxes/trunk-hg-fbcode-fbsource/xplat/flipper-public/src/plugins/fresco/ImagesSidebar.js","/data/sandcastle/boxes/trunk-hg-fbcode-fbsource/xplat/flipper-public/src/plugins/fresco/ImagePool.js"],"sourcesContent":["var __DEV__=false,__BUNDLE_START_TIME__=this.nativePerformanceNow?nativePerformanceNow():Date.now(),process=this.process||{};process.env=process.env||{};process.env.NODE_ENV=\"production\";","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @polyfill\n *\n * @format\n */\n\n\"use strict\";\n\n/* eslint-disable no-bitwise */\n\nglobal.__r = metroRequire;\nglobal.__d = define;\nglobal.__c = clear;\n\nvar modules = clear();\n\n// Don't use a Symbol here, it would pull in an extra polyfill with all sorts of\n// additional stuff (e.g. Array.from).\nvar EMPTY = {};\nvar _ref = {},\n  hasOwnProperty = _ref.hasOwnProperty;\n\nfunction clear() {\n  modules =\n    typeof __NUM_MODULES__ === \"number\"\n      ? Array(__NUM_MODULES__ | 0)\n      : Object.create(null);\n\n  // We return modules here so that we can assign an initial value to modules\n  // when defining it. Otherwise, we would have to do \"let modules = null\",\n  // which will force us to add \"nullthrows\" everywhere.\n  return modules;\n}\n\nif (__DEV__) {\n  var verboseNamesToModuleIds = Object.create(null);\n  var initializingModuleIds = [];\n}\n\nfunction define(factory, moduleId, dependencyMap) {\n  if (modules[moduleId] != null) {\n    if (__DEV__) {\n      // (We take `inverseDependencies` from `arguments` to avoid an unused\n      // named parameter in `define` in production.\n      var inverseDependencies = arguments[4];\n\n      // If the module has already been defined and the define method has been\n      // called with inverseDependencies, we can hot reload it.\n      if (inverseDependencies) {\n        global.__accept(moduleId, factory, dependencyMap, inverseDependencies);\n      } else {\n        console.warn(\n          \"Trying to define twice module ID \" + moduleId + \" in the same bundle\"\n        );\n      }\n    }\n\n    // prevent repeated calls to `global.nativeRequire` to overwrite modules\n    // that are already loaded\n    return;\n  }\n  modules[moduleId] = {\n    dependencyMap: dependencyMap,\n    factory: factory,\n    hasError: false,\n    importedAll: EMPTY,\n    importedDefault: EMPTY,\n    isInitialized: false,\n    publicModule: { exports: {} }\n  };\n  if (__DEV__) {\n    // HMR\n    modules[moduleId].hot = createHotReloadingObject();\n\n    // DEBUGGABLE MODULES NAMES\n    // we take `verboseName` from `arguments` to avoid an unused named parameter\n    // in `define` in production.\n    var _verboseName = arguments[3];\n    if (_verboseName) {\n      modules[moduleId].verboseName = _verboseName;\n      verboseNamesToModuleIds[_verboseName] = moduleId;\n    }\n  }\n}\n\nfunction metroRequire(moduleId) {\n  if (__DEV__ && typeof moduleId === \"string\") {\n    var _verboseName2 = moduleId;\n    moduleId = verboseNamesToModuleIds[_verboseName2];\n    if (moduleId == null) {\n      throw new Error('Unknown named module: \"' + _verboseName2 + '\"');\n    } else {\n      console.warn(\n        'Requiring module \"' +\n          _verboseName2 +\n          '\" by name is only supported for ' +\n          \"debugging purposes and will BREAK IN PRODUCTION!\"\n      );\n    }\n  }\n\n  //$FlowFixMe: at this point we know that moduleId is a number\n  var moduleIdReallyIsNumber = moduleId;\n\n  if (__DEV__) {\n    var initializingIndex = initializingModuleIds.indexOf(\n      moduleIdReallyIsNumber\n    );\n    if (initializingIndex !== -1) {\n      var cycle = initializingModuleIds\n        .slice(initializingIndex)\n        .map(function(id) {\n          return modules[id].verboseName;\n        });\n      // We want to show A -> B -> A:\n      cycle.push(cycle[0]);\n      console.warn(\n        \"Require cycle: \" +\n          cycle.join(\" -> \") +\n          \"\\n\\n\" +\n          \"Require cycles are allowed, but can result in uninitialized values. \" +\n          \"Consider refactoring to remove the need for a cycle.\"\n      );\n    }\n  }\n\n  var module = modules[moduleIdReallyIsNumber];\n\n  return module && module.isInitialized\n    ? module.publicModule.exports\n    : guardedLoadModule(moduleIdReallyIsNumber, module);\n}\n\nfunction metroImportDefault(moduleId) {\n  if (__DEV__ && typeof moduleId === \"string\") {\n    var _verboseName3 = moduleId;\n    moduleId = verboseNamesToModuleIds[_verboseName3];\n  }\n\n  //$FlowFixMe: at this point we know that moduleId is a number\n  var moduleIdReallyIsNumber = moduleId;\n\n  if (\n    modules[moduleIdReallyIsNumber] &&\n    modules[moduleIdReallyIsNumber].importedDefault !== EMPTY\n  ) {\n    return modules[moduleIdReallyIsNumber].importedDefault;\n  }\n\n  var exports = metroRequire(moduleIdReallyIsNumber);\n  var importedDefault =\n    exports && exports.__esModule ? exports.default : exports;\n\n  return (modules[moduleIdReallyIsNumber].importedDefault = importedDefault);\n}\n\nfunction metroImportAll(moduleId) {\n  if (__DEV__ && typeof moduleId === \"string\") {\n    var _verboseName4 = moduleId;\n    moduleId = verboseNamesToModuleIds[_verboseName4];\n  }\n\n  //$FlowFixMe: at this point we know that moduleId is a number\n  var moduleIdReallyIsNumber = moduleId;\n\n  if (\n    modules[moduleIdReallyIsNumber] &&\n    modules[moduleIdReallyIsNumber].importedAll !== EMPTY\n  ) {\n    return modules[moduleIdReallyIsNumber].importedAll;\n  }\n\n  var exports = metroRequire(moduleIdReallyIsNumber);\n  var importedAll = void 0;\n\n  if (exports && exports.__esModule) {\n    importedAll = exports;\n  } else {\n    importedAll = {};\n\n    // Refrain from using Object.assign, it has to work in ES3 environments.\n    if (exports) {\n      for (var _key in exports) {\n        if (hasOwnProperty.call(exports, _key)) {\n          importedAll[_key] = exports[_key];\n        }\n      }\n    }\n\n    importedAll.default = exports;\n  }\n\n  return (modules[moduleIdReallyIsNumber].importedAll = importedAll);\n}\n\nvar inGuard = false;\nfunction guardedLoadModule(moduleId, module) {\n  if (!inGuard && global.ErrorUtils) {\n    inGuard = true;\n    var returnValue = void 0;\n    try {\n      returnValue = loadModuleImplementation(moduleId, module);\n    } catch (e) {\n      global.ErrorUtils.reportFatalError(e);\n    }\n    inGuard = false;\n    return returnValue;\n  } else {\n    return loadModuleImplementation(moduleId, module);\n  }\n}\n\nvar ID_MASK_SHIFT = 16;\nvar LOCAL_ID_MASK = ~0 >>> ID_MASK_SHIFT;\n\nfunction unpackModuleId(moduleId) {\n  var segmentId = moduleId >>> ID_MASK_SHIFT;\n  var localId = moduleId & LOCAL_ID_MASK;\n  return { segmentId: segmentId, localId: localId };\n}\nmetroRequire.unpackModuleId = unpackModuleId;\n\nfunction packModuleId(value) {\n  return (value.segmentId << ID_MASK_SHIFT) + value.localId;\n}\nmetroRequire.packModuleId = packModuleId;\n\nvar hooks = [];\nfunction registerHook(cb) {\n  var hook = { cb: cb };\n  hooks.push(hook);\n  return {\n    release: function release() {\n      for (var i = 0; i < hooks.length; ++i) {\n        if (hooks[i] === hook) {\n          hooks.splice(i, 1);\n          break;\n        }\n      }\n    }\n  };\n}\nmetroRequire.registerHook = registerHook;\n\nfunction loadModuleImplementation(moduleId, module) {\n  if (!module && global.__defineModule) {\n    global.__defineModule(moduleId);\n    module = modules[moduleId];\n  }\n\n  var nativeRequire = global.nativeRequire;\n  if (!module && nativeRequire) {\n    var _unpackModuleId = unpackModuleId(moduleId),\n      _segmentId = _unpackModuleId.segmentId,\n      _localId = _unpackModuleId.localId;\n\n    nativeRequire(_localId, _segmentId);\n    module = modules[moduleId];\n  }\n\n  if (!module) {\n    throw unknownModuleError(moduleId);\n  }\n\n  if (module.hasError) {\n    throw moduleThrewError(moduleId, module.error);\n  }\n\n  // `metroRequire` calls into the require polyfill itself are not analyzed and\n  // replaced so that they use numeric module IDs.\n  // The systrace module will expose itself on the metroRequire function so that\n  // it can be used here.\n  // TODO(davidaurelio) Scan polyfills for dependencies, too (t9759686)\n  if (__DEV__) {\n    var Systrace = metroRequire.Systrace;\n  }\n\n  // We must optimistically mark module as initialized before running the\n  // factory to keep any require cycles inside the factory from causing an\n  // infinite require loop.\n  module.isInitialized = true;\n\n  var _module = module,\n    factory = _module.factory,\n    dependencyMap = _module.dependencyMap;\n\n  if (__DEV__) {\n    initializingModuleIds.push(moduleId);\n  }\n  try {\n    if (__DEV__) {\n      // $FlowFixMe: we know that __DEV__ is const and `Systrace` exists\n      Systrace.beginEvent(\"JS_require_\" + (module.verboseName || moduleId));\n    }\n\n    var _moduleObject = module.publicModule;\n\n    if (__DEV__) {\n      if (module.hot) {\n        _moduleObject.hot = module.hot;\n      }\n    }\n    _moduleObject.id = moduleId;\n\n    if (hooks.length > 0) {\n      for (var i = 0; i < hooks.length; ++i) {\n        hooks[i].cb(moduleId, _moduleObject);\n      }\n    }\n\n    // keep args in sync with with defineModuleCode in\n    // metro/src/Resolver/index.js\n    // and metro/src/ModuleGraph/worker.js\n    factory(\n      global,\n      metroRequire,\n      metroImportDefault,\n      metroImportAll,\n      _moduleObject,\n      _moduleObject.exports,\n      dependencyMap\n    );\n\n    // avoid removing factory in DEV mode as it breaks HMR\n    if (!__DEV__) {\n      // $FlowFixMe: This is only sound because we never access `factory` again\n      module.factory = undefined;\n      module.dependencyMap = undefined;\n    }\n\n    if (__DEV__) {\n      // $FlowFixMe: we know that __DEV__ is const and `Systrace` exists\n      Systrace.endEvent();\n    }\n    return _moduleObject.exports;\n  } catch (e) {\n    module.hasError = true;\n    module.error = e;\n    module.isInitialized = false;\n    module.publicModule.exports = undefined;\n    throw e;\n  } finally {\n    if (__DEV__) {\n      if (initializingModuleIds.pop() !== moduleId) {\n        throw new Error(\n          \"initializingModuleIds is corrupt; something is terribly wrong\"\n        );\n      }\n    }\n  }\n}\n\nfunction unknownModuleError(id) {\n  var message = 'Requiring unknown module \"' + id + '\".';\n  if (__DEV__) {\n    message +=\n      \"If you are sure the module is there, try restarting Metro Bundler. \" +\n      \"You may also want to run `yarn`, or `npm install` (depending on your environment).\";\n  }\n  return Error(message);\n}\n\nfunction moduleThrewError(id, error) {\n  var displayName = (__DEV__ && modules[id] && modules[id].verboseName) || id;\n  return Error(\n    'Requiring module \"' + displayName + '\", which threw an exception: ' + error\n  );\n}\n\nif (__DEV__) {\n  metroRequire.Systrace = {\n    beginEvent: function beginEvent() {},\n    endEvent: function endEvent() {}\n  };\n\n  metroRequire.getModules = function() {\n    return modules;\n  };\n\n  // HOT MODULE RELOADING\n  var createHotReloadingObject = function createHotReloadingObject() {\n    var hot = {\n      acceptCallback: null,\n      accept: function accept(callback) {\n        hot.acceptCallback = callback;\n      },\n      disposeCallback: null,\n      dispose: function dispose(callback) {\n        hot.disposeCallback = callback;\n      }\n    };\n    return hot;\n  };\n\n  var metroAcceptAll = function metroAcceptAll(\n    dependentModules,\n    inverseDependencies,\n    patchedModules\n  ) {\n    if (!dependentModules || dependentModules.length === 0) {\n      return true;\n    }\n\n    var notAccepted = dependentModules.filter(function(module) {\n      return !metroAccept(\n        module,\n        /*factory*/ undefined,\n        /*dependencyMap*/ undefined,\n        inverseDependencies,\n        patchedModules\n      );\n    });\n\n    var parents = [];\n    for (var i = 0; i < notAccepted.length; i++) {\n      // if the module has no parents then the change cannot be hot loaded\n      if (inverseDependencies[notAccepted[i]].length === 0) {\n        return false;\n      }\n\n      parents.push.apply(parents, inverseDependencies[notAccepted[i]]);\n    }\n\n    return parents.length == 0;\n  };\n\n  var metroAccept = function metroAccept(\n    id,\n    factory,\n    dependencyMap,\n    inverseDependencies\n  ) {\n    var patchedModules =\n      arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n    if (id in patchedModules) {\n      // Do not patch the same module more that once during an update.\n      return true;\n    }\n    patchedModules[id] = true;\n\n    var mod = modules[id];\n\n    if (!mod && factory) {\n      // New modules are going to be handled by the define() method.\n      return true;\n    }\n\n    var hot = mod.hot;\n\n    if (!hot) {\n      console.warn(\n        \"Cannot accept module because Hot Module Replacement \" +\n          \"API was not installed.\"\n      );\n      return false;\n    }\n\n    if (hot.disposeCallback) {\n      try {\n        hot.disposeCallback();\n      } catch (error) {\n        console.error(\n          \"Error while calling dispose handler for module \" + id + \": \",\n          error\n        );\n      }\n    }\n\n    // replace and initialize factory\n    if (factory) {\n      mod.factory = factory;\n    }\n    if (dependencyMap) {\n      mod.dependencyMap = dependencyMap;\n    }\n    mod.hasError = false;\n    mod.isInitialized = false;\n    metroRequire(id);\n\n    if (hot.acceptCallback) {\n      try {\n        hot.acceptCallback();\n        return true;\n      } catch (error) {\n        console.error(\n          \"Error while calling accept handler for module \" + id + \": \",\n          error\n        );\n      }\n    }\n\n    // need to have inverseDependencies to bubble up accept\n    if (!inverseDependencies) {\n      throw new Error(\"Undefined `inverseDependencies`\");\n    }\n\n    // accept parent modules recursively up until all siblings are accepted\n    return metroAcceptAll(\n      inverseDependencies[id],\n      inverseDependencies,\n      patchedModules\n    );\n  };\n\n  global.__accept = metroAccept;\n}\n","/**\n * Copyright 2018-present Facebook.\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n * @format\n */\n\nimport type {\n  ImageId,\n  ImageData,\n  ImagesList,\n  ImagesListResponse,\n  ImageEvent,\n  FrescoDebugOverlayEvent,\n  CacheInfo,\n} from './api.js';\nimport type {ImagesMap} from './ImagePool.js';\n\nimport React from 'react';\nimport ImagesCacheOverview from './ImagesCacheOverview.js';\nimport {\n  FlipperPlugin,\n  FlexRow,\n  Text,\n  DetailSidebar,\n  colors,\n  styled,\n} from 'flipper';\nimport ImagesSidebar from './ImagesSidebar.js';\nimport ImagePool from './ImagePool.js';\n\nexport type ImageEventWithId = ImageEvent & {eventId: number};\n\ntype PersistedState = {\n  surfaceList: Set<string>,\n  images: ImagesList,\n  events: Array<ImageEventWithId>,\n  imagesMap: ImagesMap,\n};\n\ntype PluginState = {\n  selectedSurface: string,\n  selectedImage: ?ImageId,\n  isDebugOverlayEnabled: boolean,\n  isAutoRefreshEnabled: boolean,\n  images: ImagesList,\n  coldStartFilter: boolean,\n};\n\nconst EmptySidebar = styled(FlexRow)({\n  alignItems: 'center',\n  justifyContent: 'center',\n  color: colors.light30,\n  padding: 15,\n  fontSize: 16,\n});\n\nconst DEBUG = false;\nconst surfaceDefaultText = 'SELECT ALL SURFACES';\n\nexport default class extends FlipperPlugin<PluginState, *, PersistedState> {\n  static defaultPersistedState: PersistedState = {\n    images: [],\n    events: [],\n    imagesMap: {},\n    surfaceList: new Set(),\n  };\n\n  state: PluginState;\n  imagePool: ImagePool;\n  nextEventId: number = 1;\n\n  state = {\n    selectedSurface: surfaceDefaultText,\n    selectedImage: null,\n    isDebugOverlayEnabled: false,\n    isAutoRefreshEnabled: false,\n    images: [],\n    coldStartFilter: false,\n  };\n\n  init() {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.log('init()');\n    }\n    this.updateCaches('init');\n    this.client.subscribe('events', (event: ImageEvent) => {\n      const {surfaceList} = this.props.persistedState;\n      const {attribution} = event;\n      if (attribution instanceof Array && attribution.length > 0) {\n        const surface = attribution[0].trim();\n        if (surface.length > 0) {\n          surfaceList.add(surface);\n        }\n      }\n      this.props.setPersistedState({\n        events: [\n          {eventId: this.nextEventId, ...event},\n          ...this.props.persistedState.events,\n        ],\n      });\n      this.nextEventId++;\n    });\n    this.client.subscribe(\n      'debug_overlay_event',\n      (event: FrescoDebugOverlayEvent) => {\n        this.setState({isDebugOverlayEnabled: event.enabled});\n      },\n    );\n\n    this.imagePool = new ImagePool(this.getImage, (images: ImagesMap) =>\n      this.props.setPersistedState({imagesMap: images}),\n    );\n  }\n\n  teardown() {\n    this.imagePool.clear();\n  }\n\n  filterImages = (\n    images: ImagesList,\n    events: Array<ImageEventWithId>,\n    surface: string,\n    coldStart: boolean,\n  ): ImagesList => {\n    if (!surface || (surface === surfaceDefaultText && !coldStart)) {\n      return images;\n    }\n    const imageList = images.map((image: CacheInfo) => {\n      const imageIdList = image.imageIds.filter(imageID => {\n        const filteredEvents = events.filter((event: ImageEventWithId) => {\n          const output =\n            event.attribution &&\n            event.attribution.length > 0 &&\n            event.imageIds &&\n            event.imageIds.includes(imageID);\n\n          if (surface === surfaceDefaultText) {\n            return output && coldStart && event.coldStart;\n          }\n          return (\n            (!coldStart || (coldStart && event.coldStart)) &&\n            output &&\n            event.attribution[0] == surface\n          );\n        });\n        return filteredEvents.length > 0;\n      });\n      return {...image, imageIds: imageIdList};\n    });\n    return imageList;\n  };\n\n  updateImagesOnUI = (\n    images: ImagesList,\n    surface: string,\n    coldStart: boolean,\n  ) => {\n    const filteredImages = this.filterImages(\n      images,\n      this.props.persistedState.events,\n      surface,\n      coldStart,\n    );\n    this.setState({\n      selectedSurface: surface,\n      images: filteredImages,\n      coldStartFilter: coldStart,\n    });\n  };\n  updateCaches = (reason: string) => {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.log('Requesting images list (reason=' + reason + ')');\n    }\n    this.client.call('listImages').then((response: ImagesListResponse) => {\n      response.levels.forEach(data =>\n        this.imagePool.fetchImages(data.imageIds),\n      );\n      this.props.setPersistedState({images: response.levels});\n      this.updateImagesOnUI(\n        this.props.persistedState.images,\n        this.state.selectedSurface,\n        this.state.coldStartFilter,\n      );\n    });\n  };\n\n  onClear = (type: string) => {\n    this.client.call('clear', {type});\n    setTimeout(() => this.updateCaches('onClear'), 1000);\n  };\n\n  onTrimMemory = () => {\n    this.client.call('trimMemory', {});\n    setTimeout(() => this.updateCaches('onTrimMemory'), 1000);\n  };\n\n  onEnableDebugOverlay = (enabled: boolean) => {\n    this.client.call('enableDebugOverlay', {enabled});\n  };\n\n  onEnableAutoRefresh = (enabled: boolean) => {\n    this.setState({isAutoRefreshEnabled: enabled});\n    if (enabled) {\n      // Delay the call just enough to allow the state change to complete.\n      setTimeout(() => this.onAutoRefresh());\n    }\n  };\n\n  onAutoRefresh = () => {\n    this.updateCaches('auto-refresh');\n    if (this.state.isAutoRefreshEnabled) {\n      setTimeout(() => this.onAutoRefresh(), 1000);\n    }\n  };\n\n  getImage = (imageId: string) => {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.log('<- getImage requested for ' + imageId);\n    }\n    this.client.call('getImage', {imageId}).then((image: ImageData) => {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.log('-> getImage ' + imageId + ' returned');\n      }\n      this.imagePool._fetchCompleted(image);\n    });\n  };\n\n  onImageSelected = (selectedImage: ImageId) => this.setState({selectedImage});\n\n  renderSidebar = () => {\n    const {selectedImage} = this.state;\n\n    if (selectedImage == null) {\n      return (\n        <EmptySidebar grow={true}>\n          <Text align=\"center\">\n            Select an image to see the events associated with it.\n          </Text>\n        </EmptySidebar>\n      );\n    }\n\n    const maybeImage = this.props.persistedState.imagesMap[selectedImage];\n    const events = this.props.persistedState.events.filter(e =>\n      e.imageIds.includes(selectedImage),\n    );\n    return <ImagesSidebar image={maybeImage} events={events} />;\n  };\n\n  onSurfaceChange = (surface: string) => {\n    this.updateImagesOnUI(\n      this.props.persistedState.images,\n      surface,\n      this.state.coldStartFilter,\n    );\n  };\n\n  onColdStartChange = (checked: boolean) => {\n    this.updateImagesOnUI(\n      this.props.persistedState.images,\n      this.state.selectedSurface,\n      checked,\n    );\n  };\n\n  render() {\n    const options = [...this.props.persistedState.surfaceList].reduce(\n      (acc, item) => {\n        return {...acc, [item]: item};\n      },\n      {[surfaceDefaultText]: surfaceDefaultText},\n    );\n    return (\n      <React.Fragment>\n        <ImagesCacheOverview\n          surfaceOptions={options}\n          selectedSurface={this.state.selectedSurface}\n          onChangeSurface={this.onSurfaceChange}\n          coldStartFilter={this.state.coldStartFilter}\n          onColdStartChange={this.onColdStartChange}\n          images={this.state.images}\n          onClear={this.onClear}\n          onTrimMemory={this.onTrimMemory}\n          onRefresh={() => this.updateCaches('refresh')}\n          onEnableDebugOverlay={this.onEnableDebugOverlay}\n          onEnableAutoRefresh={this.onEnableAutoRefresh}\n          isDebugOverlayEnabled={this.state.isDebugOverlayEnabled}\n          isAutoRefreshEnabled={this.state.isAutoRefreshEnabled}\n          onImageSelected={this.onImageSelected}\n          imagesMap={this.props.persistedState.imagesMap}\n          events={this.props.persistedState.events}\n        />\n        <DetailSidebar>{this.renderSidebar()}</DetailSidebar>\n      </React.Fragment>\n    );\n  }\n}\n","/**\n * Copyright 2018-present Facebook.\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n * @format\n */\n\nimport type {ImageId, ImageData, ImagesList} from './api.js';\nimport type {ImageEventWithId} from './index.js';\n\nimport {\n  Toolbar,\n  Button,\n  Spacer,\n  colors,\n  FlexBox,\n  FlexRow,\n  FlexColumn,\n  LoadingIndicator,\n  styled,\n  Select,\n  Checkbox,\n} from 'flipper';\nimport type {ImagesMap} from './ImagePool.js';\nimport {clipboard} from 'electron';\nimport {PureComponent} from 'react';\n\nfunction formatMB(bytes: number) {\n  return Math.floor(bytes / (1024 * 1024)) + 'MB';\n}\n\nfunction formatKB(bytes: number) {\n  return Math.floor(bytes / 1024) + 'KB';\n}\n\ntype ImagesCacheOverviewProps = {\n  onColdStartChange: (checked: boolean) => void,\n  coldStartFilter: boolean,\n  surfaceOptions: {[key: string]: string},\n  selectedSurface: string,\n  onChangeSurface: (key: string) => void,\n  images: ImagesList,\n  onClear: (type: string) => void,\n  onTrimMemory: () => void,\n  onRefresh: () => void,\n  onEnableDebugOverlay: (enabled: boolean) => void,\n  isDebugOverlayEnabled: boolean,\n  onEnableAutoRefresh: (enabled: boolean) => void,\n  isAutoRefreshEnabled: boolean,\n  onImageSelected: (selectedImage: ImageId) => void,\n  imagesMap: ImagesMap,\n  events: Array<ImageEventWithId>,\n};\n\ntype ImagesCacheOverviewState = {|\n  selectedImage: ?ImageId,\n  size: number,\n|};\n\nconst StyledSelect = styled(Select)(props => ({\n  marginLeft: 6,\n  marginRight: 6,\n  height: '100%',\n}));\n\nconst StyledCheckbox = styled(Checkbox)(props => ({\n  marginLeft: 6,\n  marginRight: 6,\n  height: '100%',\n}));\n\nexport default class ImagesCacheOverview extends PureComponent<\n  ImagesCacheOverviewProps,\n  ImagesCacheOverviewState,\n> {\n  static Container = styled(FlexColumn)({\n    backgroundColor: colors.white,\n  });\n\n  static Content = styled(FlexColumn)({\n    flex: 1,\n    overflow: 'auto',\n  });\n\n  static Empty = styled(FlexBox)({\n    alignItems: 'center',\n    height: '100%',\n    justifyContent: 'center',\n    width: '100%',\n  });\n\n  state = {\n    selectedImage: undefined,\n    size: 150,\n  };\n\n  onImageSelected = (selectedImage: ImageId) => {\n    this.setState({selectedImage});\n    this.props.onImageSelected(selectedImage);\n  };\n\n  onKeyDown = (e: SyntheticKeyboardEvent<*>) => {\n    const selectedImage = this.state.selectedImage;\n    const imagesMap = this.props.imagesMap;\n\n    if (selectedImage) {\n      if ((e.ctrlKey || e.metaKey) && e.key === 'c') {\n        clipboard.writeText(String(imagesMap[selectedImage]));\n        e.preventDefault();\n      }\n    }\n  };\n\n  onEnableDebugOverlayToggled = () => {\n    this.props.onEnableDebugOverlay(!this.props.isDebugOverlayEnabled);\n  };\n\n  onEnableAutoRefreshToggled = () => {\n    this.props.onEnableAutoRefresh(!this.props.isAutoRefreshEnabled);\n  };\n\n  onChangeSize = (e: SyntheticInputEvent<HTMLInputElement>) =>\n    this.setState({size: parseInt(e.target.value, 10)});\n\n  render() {\n    const hasImages =\n      this.props.images.reduce(\n        (c, cacheInfo) => c + cacheInfo.imageIds.length,\n        0,\n      ) > 0;\n    return (\n      <ImagesCacheOverview.Container\n        grow={true}\n        onKeyDown={this.onKeyDown}\n        tabIndex=\"0\">\n        <Toolbar position=\"top\">\n          <Button icon=\"cross-outline\" onClick={this.props.onTrimMemory}>\n            Trim Memory\n          </Button>\n          <Button onClick={this.onEnableDebugOverlayToggled}>\n            DebugOverlay {this.props.isDebugOverlayEnabled ? 'ON' : 'OFF'}\n          </Button>\n          <Button onClick={this.props.onRefresh}>Refresh</Button>\n          <Button onClick={this.onEnableAutoRefreshToggled}>\n            Auto Refresh {this.props.isAutoRefreshEnabled ? 'ON' : 'OFF'}\n          </Button>\n          <StyledSelect\n            options={this.props.surfaceOptions}\n            selected={this.props.selectedSurface}\n            onChange={this.props.onChangeSurface}\n          />\n          <StyledCheckbox\n            checked={this.props.coldStartFilter}\n            onChange={this.props.onColdStartChange}\n          />\n          Show ColdStart Images\n          <Spacer />\n          <input\n            type=\"range\"\n            onChange={this.onChangeSize}\n            min={50}\n            max={150}\n            value={this.state.size}\n          />\n        </Toolbar>\n        {!hasImages ? (\n          <ImagesCacheOverview.Empty>\n            <LoadingIndicator />\n          </ImagesCacheOverview.Empty>\n        ) : (\n          <ImagesCacheOverview.Content>\n            {this.props.images.map(data => {\n              const maxSize = data.maxSizeBytes;\n              const subtitle = maxSize\n                ? formatMB(data.sizeBytes) + ' / ' + formatMB(maxSize)\n                : formatMB(data.sizeBytes);\n              const onClear = data.clearKey\n                ? () => this.props.onClear(data.clearKey)\n                : null;\n              return (\n                <ImageGrid\n                  title={data.cacheType}\n                  subtitle={subtitle}\n                  images={data.imageIds}\n                  onImageSelected={this.onImageSelected}\n                  selectedImage={this.state.selectedImage}\n                  imagesMap={this.props.imagesMap}\n                  size={this.state.size}\n                  events={this.props.events}\n                  onClear={onClear}\n                />\n              );\n            })}\n          </ImagesCacheOverview.Content>\n        )}\n      </ImagesCacheOverview.Container>\n    );\n  }\n}\n\nclass ImageGrid extends PureComponent<{\n  title: string,\n  subtitle: string,\n  images: Array<ImageId>,\n  selectedImage: ?ImageId,\n  onImageSelected: (image: ImageId) => void,\n  onClear: ?() => void,\n  imagesMap: ImagesMap,\n  size: number,\n  events: Array<ImageEventWithId>,\n}> {\n  static Content = styled('div')({\n    paddingLeft: 15,\n  });\n\n  render() {\n    const {images, onImageSelected, selectedImage} = this.props;\n\n    if (images.length === 0) {\n      return null;\n    }\n\n    return [\n      <ImageGridHeader\n        key=\"header\"\n        title={this.props.title}\n        subtitle={this.props.subtitle}\n        onClear={this.props.onClear}\n      />,\n      <ImageGrid.Content key=\"content\">\n        {images.map(imageId => (\n          <ImageItem\n            imageId={imageId}\n            image={this.props.imagesMap[imageId]}\n            key={imageId}\n            selected={selectedImage != null && selectedImage === imageId}\n            onSelected={onImageSelected}\n            size={this.props.size}\n            numberOfRequests={\n              this.props.events.filter(e => e.imageIds.includes(imageId)).length\n            }\n          />\n        ))}\n      </ImageGrid.Content>,\n    ];\n  }\n}\n\nclass ImageGridHeader extends PureComponent<{\n  title: string,\n  subtitle: string,\n  onClear: ?() => void,\n}> {\n  static Container = styled(FlexRow)({\n    color: colors.dark70,\n    paddingTop: 10,\n    paddingBottom: 10,\n    marginLeft: 15,\n    marginRight: 15,\n    marginBottom: 15,\n    borderBottom: `1px solid ${colors.light10}`,\n    flexShrink: 0,\n    alignItems: 'center',\n    position: 'sticky',\n    top: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: colors.white,\n    zIndex: 3,\n  });\n\n  static Heading = styled('span')({\n    fontSize: 22,\n    fontWeight: 600,\n  });\n\n  static Subtitle = styled('span')({\n    fontSize: 22,\n    fontWeight: 300,\n    marginLeft: 15,\n  });\n\n  static ClearButton = styled(Button)({\n    alignSelf: 'center',\n    height: 30,\n    marginLeft: 'auto',\n    width: 100,\n  });\n\n  render() {\n    return (\n      <ImageGridHeader.Container>\n        <ImageGridHeader.Heading>{this.props.title}</ImageGridHeader.Heading>\n        <ImageGridHeader.Subtitle>\n          {this.props.subtitle}\n        </ImageGridHeader.Subtitle>\n        <Spacer />\n        {this.props.onClear ? (\n          <ImageGridHeader.ClearButton onClick={this.props.onClear}>\n            Clear Cache\n          </ImageGridHeader.ClearButton>\n        ) : null}\n      </ImageGridHeader.Container>\n    );\n  }\n}\n\nclass ImageItem extends PureComponent<{\n  imageId: ImageId,\n  image: ?ImageData,\n  selected: boolean,\n  onSelected: (image: ImageId) => void,\n  size: number,\n  numberOfRequests: number,\n}> {\n  static Container = styled(FlexBox)(({size}) => ({\n    float: 'left',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexShrink: 0,\n    height: size,\n    width: size,\n    borderRadius: 4,\n    marginRight: 15,\n    marginBottom: 15,\n    backgroundColor: colors.light02,\n  }));\n\n  static Image = styled('img')({\n    borderRadius: 4,\n    maxHeight: '100%',\n    maxWidth: '100%',\n    objectFit: 'contain',\n  });\n\n  static Loading = styled('span')({\n    padding: '0 0',\n  });\n\n  static SelectedHighlight = styled('div')(props => ({\n    borderColor: colors.highlight,\n    borderStyle: 'solid',\n    borderWidth: props.selected ? 3 : 0,\n    borderRadius: 4,\n    boxShadow: props.selected ? `inset 0 0 0 1px ${colors.white}` : 'none',\n    bottom: 0,\n    left: 0,\n    position: 'absolute',\n    right: 0,\n    top: 0,\n  }));\n\n  static HoverOverlay = styled(FlexColumn)(props => ({\n    alignItems: 'center',\n    backgroundColor: colors.whiteAlpha80,\n    bottom: props.selected ? 4 : 0,\n    fontSize: props.size > 100 ? 16 : 11,\n    justifyContent: 'center',\n    left: props.selected ? 4 : 0,\n    opacity: 0,\n    position: 'absolute',\n    right: props.selected ? 4 : 0,\n    top: props.selected ? 4 : 0,\n    overflow: 'hidden',\n    transition: '.1s opacity',\n    '&:hover': {\n      opacity: 1,\n    },\n  }));\n\n  static MemoryLabel = styled('span')({\n    fontWeight: 600,\n    marginBottom: 6,\n  });\n\n  static SizeLabel = styled('span')({\n    fontWeight: 300,\n  });\n\n  static Events = styled('div')({\n    position: 'absolute',\n    top: -5,\n    right: -5,\n    color: colors.white,\n    backgroundColor: colors.highlight,\n    fontWeight: 600,\n    borderRadius: 10,\n    fontSize: '0.85em',\n    zIndex: 2,\n    lineHeight: '20px',\n    width: 20,\n    textAlign: 'center',\n  });\n\n  static defaultProps = {\n    size: 150,\n  };\n\n  onClick = () => {\n    this.props.onSelected(this.props.imageId);\n  };\n\n  render() {\n    const {image, selected, size, numberOfRequests} = this.props;\n\n    return (\n      <ImageItem.Container onClick={this.onClick} size={size}>\n        {numberOfRequests > 0 && image != null && (\n          <ImageItem.Events>{numberOfRequests}</ImageItem.Events>\n        )}\n        {image != null ? (\n          <ImageItem.Image src={image.data} />\n        ) : (\n          <LoadingIndicator size={25} />\n        )}\n        <ImageItem.SelectedHighlight selected={selected} />\n        {image != null && (\n          <ImageItem.HoverOverlay selected={selected} size={size}>\n            <ImageItem.MemoryLabel>\n              {formatKB(image.sizeBytes)}\n            </ImageItem.MemoryLabel>\n            <ImageItem.SizeLabel>\n              {image.width}&times;{image.height}\n            </ImageItem.SizeLabel>\n          </ImageItem.HoverOverlay>\n        )}\n      </ImageItem.Container>\n    );\n  }\n}\n","/**\n * Copyright 2018-present Facebook.\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n * @format\n */\n\nimport type {ImageData} from './api.js';\nimport type {ImageEventWithId} from './index.js';\nimport {\n  Component,\n  DataDescription,\n  Text,\n  Panel,\n  ManagedDataInspector,\n  colors,\n  styled,\n} from 'flipper';\n\ntype ImagesSidebarProps = {\n  image: ?ImageData,\n  events: Array<ImageEventWithId>,\n};\n\ntype ImagesSidebarState = {};\n\nconst DataDescriptionKey = styled('span')({\n  color: colors.grapeDark1,\n});\n\nexport default class ImagesSidebar extends Component<\n  ImagesSidebarProps,\n  ImagesSidebarState,\n> {\n  render() {\n    return (\n      <div>\n        {this.renderUri()}\n        {this.props.events.map(e => (\n          <EventDetails key={e.eventId} event={e} />\n        ))}\n      </div>\n    );\n  }\n\n  renderUri() {\n    if (!this.props.image) {\n      return null;\n    }\n    if (!this.props.image.uri) {\n      return null;\n    }\n    return (\n      <p>\n        <DataDescriptionKey>URI</DataDescriptionKey>\n        <span key=\"sep\">: </span>\n        <DataDescription\n          type=\"string\"\n          value={this.props.image.uri}\n          setValue={function(path: Array<string>, val: any) {}}\n        />\n      </p>\n    );\n  }\n}\n\nclass EventDetails extends Component<{\n  event: ImageEventWithId,\n}> {\n  static Container = styled(Panel)({\n    flexShrink: 0,\n    marginTop: '15px',\n  });\n\n  render() {\n    const {event} = this.props;\n\n    return (\n      <EventDetails.Container\n        heading={<RequestHeader event={event} />}\n        floating={false}\n        padded={false}\n        grow={false}\n        collapsed={false}>\n        <p>\n          <DataDescriptionKey>Attribution</DataDescriptionKey>\n          <span key=\"sep\">: </span>\n          <ManagedDataInspector data={event.attribution} />\n        </p>\n        <p>\n          <DataDescriptionKey>Time start</DataDescriptionKey>\n          <span key=\"sep\">: </span>\n          <DataDescription\n            type=\"number\"\n            value={event.startTime}\n            setValue={function(path: Array<string>, val: any) {}}\n          />\n        </p>\n        <p>\n          <DataDescriptionKey>Time end</DataDescriptionKey>\n          <span key=\"sep\">: </span>\n          <DataDescription\n            type=\"number\"\n            value={event.endTime}\n            setValue={function(path: Array<string>, val: any) {}}\n          />\n        </p>\n        <p>\n          <DataDescriptionKey>Source</DataDescriptionKey>\n          <span key=\"sep\">: </span>\n          <DataDescription\n            type=\"string\"\n            value={event.source}\n            setValue={function(path: Array<string>, val: any) {}}\n          />\n        </p>\n        <p>\n          <DataDescriptionKey>Requested on cold start</DataDescriptionKey>\n          <span key=\"sep\">: </span>\n          <DataDescription\n            type=\"boolean\"\n            value={event.coldStart}\n            setValue={null}\n          />\n        </p>\n        {this.renderViewportData()}\n      </EventDetails.Container>\n    );\n  }\n\n  renderViewportData() {\n    const viewport = this.props.event.viewport;\n    if (!viewport) {\n      return null;\n    }\n    return (\n      <p>\n        <DataDescriptionKey>Viewport</DataDescriptionKey>\n        <span key=\"sep\">: </span>\n        <DataDescription\n          type=\"string\"\n          value={viewport.width + 'x' + viewport.height}\n          setValue={function(path: Array<string>, val: any) {}}\n        />\n      </p>\n    );\n    // TODO (t31947746): grey box time, n-th scan time\n  }\n}\n\nclass RequestHeader extends Component<{\n  event: ImageEventWithId,\n}> {\n  dateString = timestamp => {\n    const date = new Date(timestamp);\n    return `${date.toTimeString().split(' ')[0]}.${(\n      '000' + date.getMilliseconds()\n    ).substr(-3)}`;\n  };\n\n  render() {\n    const {event} = this.props;\n    const durationMs = event.endTime - event.startTime;\n    return (\n      <Text>\n        {event.viewport ? 'Request' : 'Prefetch'} at{' '}\n        {this.dateString(event.startTime)} ({durationMs}ms)\n      </Text>\n    );\n  }\n}\n","/**\n * Copyright 2018-present Facebook.\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n * @format\n */\n\nimport type {ImageId, ImageData} from './api.js';\n\nexport type ImagesMap = {[imageId: ImageId]: ImageData};\n\nconst maxInflightRequests = 10;\n\nexport default class ImagePool {\n  cache: ImagesMap = {};\n  requested: {[imageId: ImageId]: boolean} = {};\n  queued: Array<ImageId> = [];\n  inFlightRequests: number = 0;\n  fetchImage: (imageId: ImageId) => void;\n  updateNotificationScheduled: boolean = false;\n  onPoolUpdated: (images: ImagesMap) => void;\n\n  constructor(\n    fetchImage: (imageId: ImageId) => void,\n    onPoolUpdated: (images: ImagesMap) => void,\n  ) {\n    this.fetchImage = fetchImage;\n    this.onPoolUpdated = onPoolUpdated;\n  }\n\n  getImages(): ImagesMap {\n    return {...this.cache};\n  }\n\n  fetchImages(ids: Array<string>) {\n    for (const id of ids) {\n      if (!this.cache[id] && !this.requested[id]) {\n        this.requested[id] = true;\n\n        if (this.inFlightRequests < maxInflightRequests) {\n          this.inFlightRequests++;\n          this.fetchImage(id);\n        } else {\n          this.queued.unshift(id);\n        }\n      }\n    }\n  }\n\n  clear() {\n    this.cache = {};\n    this.requested = {};\n  }\n\n  _fetchCompleted(image: ImageData): void {\n    this.cache[image.imageId] = image;\n    delete this.requested[image.imageId];\n\n    if (this.queued.length > 0) {\n      this.fetchImage(this.queued.pop());\n    } else {\n      this.inFlightRequests--;\n    }\n\n    if (!this.updateNotificationScheduled) {\n      this.updateNotificationScheduled = true;\n      window.setTimeout(this._notify, 1000);\n    }\n  }\n\n  _notify = () => {\n    this.updateNotificationScheduled = false;\n    this.onPoolUpdated(this.getImages());\n  };\n}\n"],"names":["global","__r","metroRequire","__d","define","__c","clear","modules","EMPTY","_ref","hasOwnProperty","__NUM_MODULES__","Array","Object","create","factory","moduleId","dependencyMap","hasError","importedAll","importedDefault","isInitialized","publicModule","exports","moduleIdReallyIsNumber","module","guardedLoadModule","metroImportDefault","__esModule","default","metroImportAll","_key","call","inGuard","ErrorUtils","returnValue","loadModuleImplementation","e","reportFatalError","ID_MASK_SHIFT","LOCAL_ID_MASK","unpackModuleId","segmentId","localId","packModuleId","value","hooks","registerHook","cb","hook","push","release","i","length","splice","__defineModule","nativeRequire","_unpackModuleId","_segmentId","_localId","unknownModuleError","moduleThrewError","error","_module","_moduleObject","id","undefined","message","Error","displayName","EmptySidebar","FlexRow","alignItems","justifyContent","color","colors","light30","padding","fontSize","DEBUG","surfaceDefaultText","FlipperPlugin","selectedSurface","selectedImage","isDebugOverlayEnabled","isAutoRefreshEnabled","images","coldStartFilter","events","surface","coldStart","imageList","map","image","imageIdList","imageIds","filter","imageID","filteredEvents","event","output","attribution","includes","filteredImages","filterImages","props","persistedState","setState","reason","client","then","response","levels","forEach","data","imagePool","fetchImages","setPersistedState","updateImagesOnUI","state","type","setTimeout","updateCaches","enabled","onAutoRefresh","imageId","_fetchCompleted","maybeImage","imagesMap","checked","init","subscribe","surfaceList","trim","add","eventId","nextEventId","ImagePool","getImage","teardown","render","options","reduce","acc","item","onSurfaceChange","onColdStartChange","onClear","onTrimMemory","onEnableDebugOverlay","onEnableAutoRefresh","onImageSelected","renderSidebar","Set","formatMB","bytes","Math","floor","formatKB","StyledSelect","Select","marginLeft","marginRight","height","StyledCheckbox","Checkbox","ImagesCacheOverview","PureComponent","size","ctrlKey","metaKey","key","clipboard","writeText","String","preventDefault","parseInt","target","hasImages","c","cacheInfo","onKeyDown","onEnableDebugOverlayToggled","onRefresh","onEnableAutoRefreshToggled","surfaceOptions","onChangeSurface","onChangeSize","maxSize","maxSizeBytes","subtitle","sizeBytes","clearKey","cacheType","FlexColumn","backgroundColor","white","flex","overflow","FlexBox","width","ImageGrid","title","paddingLeft","ImageGridHeader","dark70","paddingTop","paddingBottom","marginBottom","borderBottom","light10","flexShrink","position","top","left","right","zIndex","fontWeight","Button","alignSelf","ImageItem","onSelected","selected","numberOfRequests","onClick","float","borderRadius","light02","maxHeight","maxWidth","objectFit","borderColor","highlight","borderStyle","borderWidth","boxShadow","bottom","whiteAlpha80","opacity","transition","lineHeight","textAlign","DataDescriptionKey","grapeDark1","ImagesSidebar","Component","renderUri","uri","path","val","EventDetails","startTime","endTime","source","renderViewportData","viewport","Panel","marginTop","RequestHeader","timestamp","date","Date","toTimeString","split","getMilliseconds","substr","durationMs","dateString","maxInflightRequests","constructor","fetchImage","onPoolUpdated","updateNotificationScheduled","getImages","cache","ids","requested","inFlightRequests","queued","unshift","pop","window","_notify"],"mappings":"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"}